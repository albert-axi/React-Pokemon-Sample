(this["webpackJsonpreact-sample"]=this["webpackJsonpreact-sample"]||[]).push([[0],{48:function(e,t,n){},50:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(35),o=n.n(a),s=(n(48),n(26)),u=n(17),i=n(13),j=n.n(i),l=n(18),p=n(9),d=n(19),b=n(10),O=(n(50),n(36)),f=n(37),m=n(43),h=n(41),x=n(3),v=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return Object(x.jsx)("h1",{children:"Home Page"})}}]),n}(r.Component),k={light:{foreground:"red",background:"yellow"},dark:{foreground:"white",background:"grey"}},g=Object(r.createContext)(k.light),y=n(42),E=n(25);E.a.initializeApp({apiKey:"AIzaSyBEinzX3VoskpbPG-vViOjGf-kszB68ygY",authDomain:"pokemon-react-286be.firebaseapp.com",projectId:"pokemon-react-286be",storageBucket:"pokemon-react-286be.appspot.com",messagingSenderId:"665547111412",appId:"1:665547111412:web:ff61e88f8a81f5151017a1",measurementId:"G-N4BEN62SK6"});var C=E.a.auth.EmailAuthProvider,P=E.a.auth(),N=E.a.firestore(),w=Object(r.createContext)(null),S=function(e){var t=Object(r.useReducer)(D,{favourites:[]}),n=Object(p.a)(t,2),c=n[0],a=n[1];return Object(x.jsx)(w.Provider,{value:[c,a],children:e.children})};function D(e,t){switch(t.type){case"ADD_POKEMON":return e.favourites.find((function(e){return e.id===t.payload.pokemon.id}))?e:{favourites:[].concat(Object(y.a)(e.favourites),[t.payload.pokemon])};case"REMOVE_POKEMON":return{favourites:e.favourites.filter((function(e){return e.id!==t.payload.pokemon.id}))};case"CLEAR_POKEMON":return console.log("RESET FAVOURITE POKEMON CONTEXT"),{favourites:[]};default:return e}}var I=Object(r.createContext)(null),A=function(e){var t=Object(r.useState)([]),n=Object(p.a)(t,2),c=n[0],a=n[1],o=Object(r.useState)(null),s=Object(p.a)(o,2),u={pokemonState:[c,a],pokemonDataState:[s[0],s[1]]};return Object(x.jsx)(I.Provider,{value:u,children:e.children})},M=Object(r.createContext)(null),F=function(e){var t=Object(r.useState)(null),n=Object(p.a)(t,2),c=n[0],a=n[1];return Object(x.jsx)(M.Provider,{value:[c,a],children:e.children})},K=function(e){var t=e.name,n=Object(r.useContext)(M),c=Object(p.a)(n,2),a=c[0],o=(c[1],Object(r.useContext)(w)),s=Object(p.a)(o,2),i=s[0],d=s[1],b=Object(r.useContext)(I).pokemonDataState,O=Object(p.a)(b,1)[0],f=function(){return i.favourites.find((function(e){return e.name===t}))},m=function(){return O[t]},h=function(){var e=Object(l.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f()){e.next=6;break}n=i.favourites.find((function(e){return e.id===m().id})),N.collection("users").doc(a.uid).collection("pokemon").doc(n.uid).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){return console.error("Error removing document: ",e)})),d({type:"REMOVE_POKEMON",payload:{pokemon:m()}}),e.next=11;break;case 6:return e.next=8,N.collection("users").doc(a.uid).collection("pokemon").add(m());case 8:r=e.sent,console.log("NEW POKEMON",r.id),d({type:"ADD_POKEMON",payload:{pokemon:Object(u.a)({uid:r.id},m())}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("button",{onClick:h,children:f()?" Remove to Fav":"Add to Fav"})},R=function(e){var t=e.image,n=e.name,c=e.types,a=Object(r.useContext)(g);return Object(x.jsxs)("div",{className:"poke-card",style:{background:a.background,color:a.foreground},children:[Object(x.jsx)("img",{src:t,alt:n}),Object(x.jsx)("h2",{children:n}),Object(x.jsxs)("small",{children:["Types: ",c.join(", ")]}),Object(x.jsx)(K,{name:n})]})};R.defaultProps={image:"http://i.imgur.com/bJw8ndW.png",name:"Unknown Pokemon",types:["No type"]};var _=R,T=function(){var e=Object(r.useContext)(I).pokemonDataState,t=Object(p.a)(e,1)[0];return Object(x.jsxs)("div",{className:"pokedex",children:[Object(x.jsx)("h1",{children:"Pokedex"}),Object(x.jsx)("div",{className:"pokemon-list",children:Object.keys(t).map((function(e){return Object(x.jsx)(d.b,{to:"/pokemon/".concat(e),children:Object(x.jsx)(_,{image:t[e].sprites.front_default,name:t[e].name,types:t[e].types.map((function(e){return e.type.name}))},e)},e)}))})]})},B=function(e){var t=Object(r.useContext)(I);t.pokemonState,t.pokemonDataState;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h1",{style:{display:"grid",justifyContent:"center"},children:"Pokemon Page"}),Object(x.jsx)(T,{})]})},V=function(){var e=Object(r.useContext)(g);return Object(x.jsxs)("nav",{className:"nav-bar",style:{background:e.background,color:e.foreground},children:[Object(x.jsx)(d.b,{to:"/",children:"Home"}),Object(x.jsx)(d.b,{to:"/pokemon",children:"Pokemon"}),Object(x.jsx)(d.b,{to:"/favourites",children:"Favourites"}),Object(x.jsx)(d.b,{to:"/contact",children:"Contact"})]})},U=function(){return Object(r.useEffect)((function(){var e=setInterval((function(){return console.log("Hello World")}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsx)("h1",{children:"Contact Page"})},z=function(){var e=Object(r.useContext)(w),t=Object(p.a)(e,1)[0];return Object(x.jsxs)("div",{className:"pokedex",children:[Object(x.jsx)("h1",{children:"Favourites"}),Object(x.jsx)("div",{className:"pokemon-list",children:t.favourites.map((function(e){return Object(x.jsx)(_,{image:e.sprites.front_default,name:e.name,types:e.types.map((function(e){return e.type.name})),pokeId:e.id},e.id)}))})]})},L=function(e){var t=e.match.params.pokemon,n=e.pokemonData;return Object(x.jsx)("div",{className:"pokemon-list",children:Object(x.jsx)(_,{image:n[t].sprites.front_default,name:n[t].name,types:n[t].types.map((function(e){return e.type.name}))},t)})},W=n(39),G=n.n(W),H={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[C.PROVIDER_ID]};var J=function(){var e=Object(r.useState)(!1),t=Object(p.a)(e,2),n=t[0],c=t[1],a=Object(r.useContext)(M),o=Object(p.a)(a,2),s=(o[0],o[1]),i=Object(r.useContext)(w),d=Object(p.a)(i,2),b=(d[0],d[1]);return Object(r.useEffect)((function(){var e=P.onAuthStateChanged(function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!!t),s(t),!t){e.next=11;break}return N.collection("users").doc(t.uid).set({displayName:t.displayName}),e.next=6,N.collection("users").doc(t.uid).collection("pokemon").get();case 6:n=e.sent,console.log("USER: ",t.uid),n.docs.forEach((function(e){return b({type:"ADD_POKEMON",payload:{pokemon:Object(u.a)({uid:e.id},e.data()),user:t}})})),e.next=12;break;case 11:b({type:"CLEAR_POKEMON"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),n?Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"My App"}),Object(x.jsxs)("p",{children:["Welcome ",P.currentUser.displayName,"! You are now signed-in!"]}),Object(x.jsx)("a",{onClick:function(){return P.signOut()},children:"Sign-out"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"My App"}),Object(x.jsx)("p",{children:"Please sign-in:"}),Object(x.jsx)(G.a,{uiConfig:H,firebaseAuth:P})]})},X=(n(67),function(){var e=Object(r.useContext)(I),t=e.pokemonState,n=e.pokemonDataState,c=Object(p.a)(t,2),a=c[0],o=c[1],i=Object(p.a)(n,2),O=i[0],f=i[1],m=function(){var e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pokeapi.co/api/v2/pokemon?limit=151");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:t=e.sent,o(t),t.forEach(function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t.url);case 2:n=e.sent,f((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(s.a)({},t.name,n))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(y,[]),Object(x.jsx)(g.Provider,{value:k.light,children:Object(x.jsxs)(d.a,{children:[Object(x.jsx)(V,{}),Object(x.jsx)(J,{}),Object(x.jsx)(b.a,{exact:!0,path:"/",component:v}),Object(x.jsx)(b.a,{path:"/contact",component:U}),Object(x.jsx)(b.a,{path:"/favourites",component:z}),Object(x.jsx)(b.a,{exact:!0,path:"/pokemon",render:function(e){return Object.keys(O).length===a.length?Object(x.jsx)(B,Object(u.a)({},e)):Object(x.jsx)("h1",{children:"No Pokemons to Show"})}}),Object(x.jsx)(b.a,{path:"/pokemon/:pokemon",render:function(e){return Object(x.jsx)(L,Object(u.a)(Object(u.a)({},e),{},{pokemonData:O}))}})]})})}),Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,69)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(F,{children:Object(x.jsx)(S,{children:Object(x.jsx)(A,{children:Object(x.jsx)(X,{})})})})}),document.getElementById("root")),Y()}},[[68,1,2]]]);
//# sourceMappingURL=main.67716bcd.chunk.js.map